# University Programs

## DevOps education program
### Module 3 Database Administration


#### TASK 3.1
***
##### PART 1
![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-23_170006.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230510.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230629.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230712.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230732.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230822.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_230955.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_231031.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_231042.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_231959.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_232032.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_232055.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_232112.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_232128.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_232655.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_233914.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_234102.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_234407.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_234559.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_234719.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-24_234804.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_092515.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_092525.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_092645.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_092740.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_093430.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_093507.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_093908.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_094010.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_100816.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_100931.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_101452.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_101844.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_102106.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.1/2020-12-25_102249.jpg)

```
wget https://dev.mysql.com/get/mysql-apt-config_0.8.16-1_all.deb
apt install -y mysql-apt-config_0.8.16-1_all.deb

or

sudo apt-get update
sudo apt-get install mysql-server
mysql_secure_installation


CREATE DATABASE studentsDB;
USE studentsDB;
CREATE TABLE Kiev (
Name varchar(100),
Surname varchar(100),
Mail varchar(100)
);
CREATE TABLE Kharkiv (
Name varchar(100),
Surname varchar(100),
Mail varchar(100)
);
CREATE TABLE Lviv (
Name varchar(100),
Surname varchar(100),
Mail varchar(100)
);

USE studentsDB;
SHOW TABLES;
DESCRIBE Kharkiv;
DESCRIBE Lviv;
DESCRIBE Kiev;

cat kh.txt
LOAD DATA LOCAL INFILE 'kv.txt' INTO TABLE Kharkiv;
SELECT * FROM Kharkiv;

cat kv.txt
LOAD DATA LOCAL INFILE 'kv.txt' INTO TABLE Kiev;
SELECT * FROM Kiev;

cat lv.txt
LOAD DATA LOCAL INFILE 'lv.txt' INTO TABLE Lviv;
SELECT * FROM Lviv;

SELECT * FROM Lviv
WHERE Name='Ruslan Riznyk';

SELECT COUNT(Name), Mail
FROM Lviv
GROUP BY Mail;

SELECT Name, Surname, Mail
FROM Kiev
ORDER BY Mail ASC, Name DESC;

/*DDL*/
CREATE DATABASE e;
SHOW DATABASES;
USE e;
CREATE TABLE res (id INT(3), name VARCHAR(100), comment VARCHAR(255));
DESCRIBE res;

ALTER TABLE res RENAME resistance;

ALTER TABLE resistance MODIFY name VARCHAR(99), CHANGE comment brand CHAR(50);

ALTER TABLE resistance ADD expired DATE;

DROP TABLE e;

DROP DATABASE e;

/*DML*/

CREATE DATABASE girls;
USE girls;
CREATE TABLE womans (id INT(3), name VARCHAR(100), sex VARCHAR(1), age INT(2), eyes VARCHAR(20));
INSERT INTO womans (id, name, sex, age, eyes)
VALUES (1, 'Anna', 'f', 20, 'blue');
INSERT INTO womans (id, name, sex, age, eyes)
VALUES (1, 'Svetlana', 'f', 20, 'green');
INSERT INTO womans (id, name, sex, age, eyes)
VALUES (1, 'Olga', 'm', 25, 'dark');

SELECT name FROM womans WHERE age > 20;

SELECT id, name FROM womans WHERE name LIKE 'S%';

SELECT id, name FROM womans WHERE name LIKE 'O%' AND sex = 'm' AND eyes = 'dark';

UPDATE womans SET id = 2 WHERE eyes = 'green';

DELETE FROM womans WHERE sex = 'm';

/*DCL*/

I created admin user with all privileges in the database

CREATE USER admin@localhost;
GRANT SELECT ON girls.* TO admin@localhost IDENTIFIED BY '1QWERT0';

mysql -u admin -p girls

CREATE USER amiliya@localhost;
GRANT ALL PRIVILEGES ON girls.* TO amiliya@localhost IDENTIFIED BY '1QWERT0';
REVOKE ALL PRIVILEGES ON girls.* FROM amiliya@localhost;
SHOW GRANTS FOR amiliya@localhost;

REVOKE SELECT ON girls.* FROM admin@localhost;
```
> DDL DDL is the short name for a data definition language that deals with database schemas and descriptions of how data is supposed to reside in a database.
> CREATE - to create a database and its objects such as (table, index, views, storage procedure, function and triggers)
> ALTER - changes the structure of an existing database
> DROP - deleting objects from the database
> TRUNCATE - deletes all records from a table, including deleting all spaces allocated for records
> COMMENT - adding comments to the data dictionary
> RENAME - rename an object
> DML DML is the short name for a data manipulation language that deals with data manipulation and includes the most common SQL statements like SELECT, INSERT, UPDATE, DELETE, etc., and it is used to store, modify, retrieve, deleting and updating data in the database.
> SELECT - retrieve data from database a
> INSERT - inserting data into a table
> UPDATE - updating existing data in a table
> DELETE - deletes all records from a database table
> MERGE - UPSERT operation (insert or update)
> CALL - call a PL / SQL or Java subroutine
> Explain the plan - interpretation of the data access path
> LOCK TABLE - concurrency control
> DCL DCL is the short name for a data management language that includes commands such as GRANT and is mainly related to rights, permissions, and other controls on the database system.
> GRANT - allow users to access the database with permissions
> REVOKE - revoke user permissions granted with the GRANT command
> TCL TCL is the short name for a transaction management language that deals with transactions in a database.
> COMMIT - makes deals
> ROLLBACK - rollback a transaction in case of any error
> SAVEPOINT - rollback a transaction by making points insid

[LINK](https://www.w3schools.in/mysql/ddl-dml-dcl/)
***
##### PART 2

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_111925.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_114558.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_115507.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_120457.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_151117.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_151156.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_155732.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_161432.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_161541.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_161555.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_164552.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_165542.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.2/2020-12-25_170348.jpg)

```
mysqldump --user=admin --password=admin studentsDB > /home/debian/students.sql

mysql --user="admin" --password="admin" --database="studentsDB" --execute="DROP TABLE Lviv;"

root@virt:/home/debian# mysql --user="root" --password="root" --execute="CREATE DATABASE restore_studentsDB;"
mysql --user="root" --password="root" --execute="SHOW DATABASES;"
mysql --user="root" --password="root" --execute="GRANT ALL PRIVILEGES ON restore_studentsDB.* TO admin@localhost IDENTIFIED BY 'admin';"
mysql --user="admin" --password="admin" --execute="SHOW DATABASES;"

mysql restore_studentsDB < students.sql

mysql -h database-2.cqpxgdmu7cme.us-east-1.rds.amazonaws.com -P 3306 -u admin -p -e "SHOW DATABASES;"

mysql -h database-2.cqpxgdmu7cme.us-east-1.rds.amazonaws.com -P 3306 -u admin -p -e "CREATE DATABASE cloud_studentsDB; USE cloud_studentsDB;"

mysql -h database-2.cqpxgdmu7cme.us-east-1.rds.amazonaws.com -P 3306 -u admin -p -e "SHOW DATABASES;"

mysql -h database-2.cqpxgdmu7cme.us-east-1.rds.amazonaws.com -P 3306 -u admin -p cloud_studentsDB -e "SHOW TABLES                           "

mysql -h database-2.cqpxgdmu7cme.us-east-1.rds.amazonaws.com -P 3306 -u admin -p cloud_studentsDB -e "SELECT * FROM Lviv
WHERE Name='Ruslan Riznyk';
SELECT COUNT(Name), Mail
FROM Lviv
GROUP BY Mail;
SELECT Name, Surname, Mail
FROM Kiev
ORDER BY Mail ASC, Name DESC;"

mysqldump --user=admin --password=admin studentsDB > /home/debian/students.sql

diff students.sql CLOUDstudents.sql
```
***
##### PART 3

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_175547.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_175620.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_175848.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_180027.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_180359.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_180530.jpg)

![Image](https://github.com/Twicer/DevOps_online_Dnipro_2020Q42021Q1/blob/master/m3/task3.1/screens3.1.3/2020-12-25_180623.jpg)
